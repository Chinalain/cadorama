const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductPage-C2YdeEJt.js","assets/vendor-CIP6LD3P.js","assets/FavoritesPage-KlJuarFj.js","assets/OrderHistoryPage-Ah_sV46h.js","assets/LoginPage-D6JbmY5c.js","assets/RegisterPage-Dgz2aG0o.js","assets/CheckoutPage-D-HcY_v2.js","assets/stripe-xoVoMAn3.js","assets/OrderConfirmationPage-CbWsCHva.js","assets/ForgotPasswordPage-D1YpRlSw.js","assets/ResetPasswordPage-BRaUf2Zi.js","assets/SearchPage-BCJ_nfGF.js","assets/AccountPage-BYFJl8Jn.js","assets/TermsOfServicePage-CwX7TPw3.js","assets/PrivacyPolicyPage-BUjf_oKo.js","assets/ReturnsPolicyPage-D9JpFan_.js","assets/ProductQuickViewModal-CSmJnGEs.js"])))=>i.map(i=>d[i]);
import{r,a as he,R as K}from"./vendor-CIP6LD3P.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function c(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=c(s);fetch(s.href,o)}})();var ae={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe=r,me=Symbol.for("react.element"),pe=Symbol.for("react.fragment"),ge=Object.prototype.hasOwnProperty,fe=xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,je={key:!0,ref:!0,__self:!0,__source:!0};function ne(t,a,c){var l,s={},o=null,n=null;c!==void 0&&(o=""+c),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(n=a.ref);for(l in a)ge.call(a,l)&&!je.hasOwnProperty(l)&&(s[l]=a[l]);if(t&&t.defaultProps)for(l in a=t.defaultProps,a)s[l]===void 0&&(s[l]=a[l]);return{$$typeof:me,type:t,key:o,ref:n,props:s,_owner:fe.current}}J.Fragment=pe;J.jsx=ne;J.jsxs=ne;ae.exports=J;var e=ae.exports,Y={},te=he;Y.createRoot=te.createRoot,Y.hydrateRoot=te.hydrateRoot;const ve="modulepreload",we=function(t){return"/"+t},se={},I=function(a,c,l){let s=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),d=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));s=Promise.allSettled(c.map(u=>{if(u=we(u),u in se)return;se[u]=!0;const b=u.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const h=document.createElement("link");if(h.rel=b?"stylesheet":ve,b||(h.as="script"),h.crossOrigin="",h.href=u,d&&h.setAttribute("nonce",d),document.head.appendChild(h),b)return new Promise((p,x)=>{h.addEventListener("load",p),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(n){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=n,window.dispatchEvent(d),!d.defaultPrevented)throw n}return s.then(n=>{for(const d of n||[])d.status==="rejected"&&o(d.reason);return a().catch(o)})},le=r.createContext(void 0),be=({children:t})=>{const[a,c]=r.useState(null),[l,s]=r.useState(null),[o,n]=r.useState(!0),d=r.useCallback(()=>{localStorage.removeItem("authToken"),s(null),c(null)},[]),u=r.useCallback(async x=>{n(!0);try{const g=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${x}`}});if(g.ok){const{user:w}=await g.json();c(w),s(x)}else throw new Error("Session invalide")}catch(g){console.error("Session validation failed:",g),d()}finally{n(!1)}},[d]);r.useEffect(()=>{const x=localStorage.getItem("authToken");x?u(x):n(!1)},[u]);const b=(x,g)=>{localStorage.setItem("authToken",g),s(g),c(x)},v=async(x,g)=>{const w=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:g})}),i=await w.json();if(w.ok)b(i.user,i.token);else throw new Error(i.message||"La connexion a échoué")},h=async(x,g,w)=>{const i=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,email:g,password:w})}),m=await i.json();if(i.ok)b(m.user,m.token);else throw new Error(m.message||"L'inscription a échoué")},p=async x=>{if(!l)throw new Error("Non authentifié pour mettre à jour le profil.");const g=await fetch("/api/auth/me",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(x)}),w=await g.json();if(g.ok)c(w.user);else throw new Error(w.message||"La mise à jour du profil a échoué.")};return e.jsx(le.Provider,{value:{currentUser:a,token:l,isLoading:o,login:v,register:h,logout:d,updateUser:p},children:t})},G=()=>{const t=r.useContext(le);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ie=r.createContext(void 0),ye=({children:t})=>{const{token:a}=G(),[c,l]=r.useState(!1),[s,o]=r.useState([]),[n,d]=r.useState(null);r.useEffect(()=>{try{const i=localStorage.getItem("cartItems");i&&o(JSON.parse(i))}catch(i){console.error("Failed to load cart from localStorage",i),o([])}},[]),r.useEffect(()=>{try{localStorage.setItem("cartItems",JSON.stringify(s))}catch(i){console.error("Failed to save cart to localStorage",i)}},[s]);const u=i=>{d(i),setTimeout(()=>d(null),3e3)},b=()=>l(!c),v=(i,m=1)=>{o(N=>N.find(L=>L.id===i.id)?N.map(L=>L.id===i.id?{...L,quantity:L.quantity+m}:L):[...N,{...i,quantity:m}]),u(`${i.name} a été ajouté au panier !`)},h=i=>{o(m=>m.filter(N=>N.id!==i))},p=(i,m)=>{if(m<=0){h(i);return}o(N=>N.map(S=>S.id===i?{...S,quantity:m}:S))},x=s.reduce((i,m)=>i+m.quantity,0),g=s.reduce((i,m)=>i+m.price*m.quantity,0),w=async i=>{if(!a)throw new Error("Vous devez être connecté pour passer une commande.");if(s.length===0)throw new Error("Votre panier est vide.");const m=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({items:s,total:g,shippingDetails:i})}),N=await m.json();if(m.ok)return o([]),u("🎉 Commande passée avec succès !"),N;throw new Error(N.message||"La commande a échoué")};return e.jsx(ie.Provider,{value:{isCartOpen:c,toggleCart:b,cartItems:s,addToCart:v,removeFromCart:h,updateQuantity:p,placeOrder:w,totalItems:x,totalPrice:g,toastMessage:n},children:t})},Z=()=>{const t=r.useContext(ie);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},Ne=t=>{const{onShowAbout:a,onSelectCategory:c,onSelectSubcategory:l,onShowFavorites:s,favoriteCount:o,onShowLogin:n,onShowOrderHistory:d,onShowAccount:u,onShowAiHelper:b,isAdmin:v,onShowAdmin:h,onGoHome:p,onSearch:x}=t,[g,w]=r.useState(!1),[i,m]=r.useState(null),[N,S]=r.useState(!1),[L,E]=r.useState([]),[P,A]=r.useState(""),{toggleCart:O,totalItems:k}=Z(),{currentUser:_,logout:W}=G(),D=r.useRef(null);r.useEffect(()=>{(async()=>{try{const q=await(await fetch("/api/products/categories")).json();E(q)}catch(M){console.error("Failed to fetch categories:",M)}})()},[]);const z=()=>{D.current&&clearTimeout(D.current),m("shop")},C=()=>{D.current=window.setTimeout(()=>m(null),200)},y=f=>{f.preventDefault(),P.trim()&&(x(P.trim()),A(""),w(!1))},R=f=>{c(f),w(!1),m(null)},T=f=>{l(f),w(!1),m(null)},H=f=>{f.preventDefault(),p(),w(!1)},F=f=>M=>{M.preventDefault(),f(),w(!1),S(!1)},U=[];return _&&(v&&U.push({label:"Administration",action:h}),U.push({label:"Mon Compte",action:u},{label:"Mes Commandes",action:d})),e.jsxs("header",{className:"px-6 py-4 border-b flex justify-between items-center shadow-sm bg-white sticky top-0 z-30",children:[e.jsx("a",{href:"#",onClick:H,"aria-label":"CADORAMA Homepage",children:e.jsx("svg",{width:"190",height:"40",viewBox:"0 0 190 40",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs("g",{children:[e.jsxs("g",{transform:"translate(0, 4)",children:[e.jsx("rect",{width:"32",height:"32",rx:"8",fill:"#0d9488"}),e.jsx("path",{d:"M26 12V21H6V12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 8H4V12H28V8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 21V8",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 8H11.5C10.837 8 10.2011 7.73661 9.73223 7.26777C9.26339 6.79893 9 6.16304 9 5.5C9 4.83696 9.26339 4.20107 9.73223 3.73223C10.2011 3.26339 10.837 3 11.5 3C13.5 3 16 8 16 8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 8H20.5C21.163 8 21.7989 7.73661 22.2678 7.26777C22.7366 6.79893 23 6.16304 23 5.5C23 4.83696 22.7366 4.20107 22.2678 3.73223C21.7989 3.26339 21.163 3 20.5 3C18.5 3 16 8 16 8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("text",{x:"45",y:"28",fontFamily:"Poppins, sans-serif",fontSize:"24",fontWeight:"bold",fill:"#111827",children:"CADORAMA"})]})})}),e.jsxs("nav",{className:"hidden md:flex gap-8 items-center",children:[e.jsx("a",{href:"#",onClick:H,className:"text-gray-600 hover:text-teal-600 font-semibold transition-colors duration-300",children:"Accueil"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{id:"shop-menu-button",onMouseEnter:z,onMouseLeave:C,"aria-haspopup":"true","aria-expanded":i==="shop",className:"text-gray-600 hover:text-teal-600 font-semibold transition-colors duration-300 flex items-center gap-1",children:["Boutique",e.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${i==="shop"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),i==="shop"&&L.length>0&&e.jsx("div",{onMouseEnter:z,onMouseLeave:C,role:"menu","aria-labelledby":"shop-menu-button",className:"absolute -left-1/2 top-full mt-2 w-max max-w-4xl bg-white shadow-xl rounded-lg border p-6 grid grid-cols-5 gap-x-4 gap-y-4 transform -translate-x-1/4",children:L.map(f=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 border-b-2 border-teal-500 pb-1",children:e.jsx("a",{href:"#",onClick:M=>{M.preventDefault(),R(f.name)},className:"hover:text-teal-600 transition-colors duration-200",children:f.name})}),e.jsx("ul",{className:"space-y-2",children:f.subcategories.map(M=>e.jsx("li",{children:e.jsx("a",{href:"#",onClick:q=>{q.preventDefault(),T(M)},className:"text-sm text-gray-600 hover:text-teal-600 hover:underline",role:"menuitem",children:M})},M))})]},f.name))})]}),e.jsx("a",{href:"#",onClick:F(a),className:"text-gray-600 hover:text-teal-600 transition-colors duration-300",children:"À Propos"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("form",{onSubmit:y,className:"hidden md:flex items-center relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:P,onChange:f=>A(f.target.value),className:"px-4 py-2 w-40 lg:w-56 border rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500 transition-all duration-300 focus:w-48 lg:focus:w-64"}),e.jsx("button",{type:"submit","aria-label":"Lancer la recherche",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-teal-600",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsx("button",{onClick:b,"aria-label":"Assistant Cadeaux IA",className:"text-gray-600 hover:text-teal-600 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("button",{onClick:s,"aria-label":"Favoris",className:"relative text-gray-600 hover:text-red-500 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),o>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center",children:o})]}),e.jsxs("button",{onClick:O,"aria-label":"Panier",className:"relative text-gray-600 hover:text-teal-600",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),k>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-teal-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center",children:k})]}),e.jsx("div",{className:"hidden md:block border-l pl-4 ml-2",children:_?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{id:"user-menu-button",onClick:()=>S(!N),className:"flex items-center gap-2 text-gray-600 hover:text-teal-600","aria-haspopup":"true","aria-expanded":N,children:[e.jsxs("span",{className:"font-semibold",children:["Bonjour, ",_.name.split(" ")[0]]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${N?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),N&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl z-20 border",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:[U.map(f=>e.jsx("a",{href:"#",onClick:F(f.action),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:f.label},f.label)),e.jsx("button",{onClick:F(W),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:"Déconnexion"})]})]}):e.jsx("button",{onClick:n,className:"text-gray-600 hover:text-teal-600 font-semibold transition-colors duration-300",children:"Identifiez-vous"})}),e.jsx("button",{"aria-label":"Ouvrir le menu",className:"md:hidden text-gray-600 hover:text-teal-600",onClick:()=>w(!0),children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]}),e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300 md:hidden ${g?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>w(!1),role:"dialog","aria-modal":"true","aria-label":"Menu principal",children:e.jsxs("div",{className:`fixed top-0 right-0 h-full w-4/5 max-w-sm bg-white shadow-xl z-50 transform transition-transform duration-300 ${g?"translate-x-0":"translate-x-full"}`,onClick:f=>f.stopPropagation(),children:[e.jsx("div",{className:"flex justify-end p-4",children:e.jsx("button",{onClick:()=>w(!1),"aria-label":"Fermer le menu",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("nav",{className:"p-6",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{children:e.jsxs("form",{onSubmit:y,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Rechercher...",value:P,onChange:f=>A(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"}),e.jsx("button",{type:"submit","aria-label":"Lancer la recherche",className:"p-3 bg-gray-200 hover:bg-gray-300 rounded-md",children:e.jsx("svg",{className:"w-5 h-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),e.jsx("li",{children:e.jsx("a",{href:"#",onClick:H,className:"font-semibold text-lg hover:text-teal-600",children:"Accueil"})}),e.jsxs("li",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold text-lg",children:"Boutique"}),e.jsx("ul",{className:"pl-4 space-y-3",children:L.map(f=>e.jsxs("li",{children:[e.jsx("a",{href:"#",onClick:M=>{M.preventDefault(),R(f.name)},className:"font-bold text-md text-gray-800 hover:text-teal-600",children:f.name}),e.jsx("ul",{className:"pl-4 mt-1 space-y-2",children:f.subcategories.map(M=>e.jsx("li",{children:e.jsx("a",{href:"#",onClick:q=>{q.preventDefault(),T(M)},className:"text-sm text-gray-600 hover:text-teal-600",children:M})},M))})]},f.name))})]}),e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:F(b),className:"font-semibold text-lg hover:text-teal-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Assistant IA"]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:F(s),className:"font-semibold text-lg hover:text-red-500 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Favoris (",o,")"]})}),e.jsx("li",{children:e.jsx("a",{href:"#",onClick:F(a),className:"font-semibold text-lg hover:text-teal-600",children:"À Propos"})}),e.jsx("li",{className:"border-t pt-4 mt-4",children:_?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"font-semibold text-lg",children:["Bonjour, ",_.name]}),U.map(f=>e.jsx("a",{href:"#",onClick:F(f.action),className:"block font-semibold text-lg hover:text-teal-600",children:f.label},f.label)),e.jsx("button",{onClick:F(W),className:"w-full text-left font-semibold text-lg text-red-500",children:"Déconnexion"})]}):e.jsx("a",{href:"#",onClick:F(n),className:"font-semibold text-lg hover:text-teal-600",children:"Identifiez-vous"})})]})})]})})]})},ke=t=>t||"",Q=({product:t,className:a,...c})=>{const l=ke(t.image);return e.jsx("img",{src:l,alt:t.name,className:`${a||""} bg-gray-200`,...c})},Ce=({onViewProduct:t})=>{const[a,c]=r.useState([]),[l,s]=r.useState(0),o=r.useRef(null);r.useEffect(()=>{(async()=>{try{const p=await fetch("/api/products/for-hero");if(!p.ok)throw new Error("Failed to fetch hero products");const x=await p.json(),g=m=>x.find(N=>N.name.toLowerCase().includes(m.toLowerCase())),i=[{title:"Trouvailles High-Tech",highlight:"à prix fous",product1Name:"Montre Connectée",product2Name:"Casque Audio Hi-Fi"},{title:"Le Style qui vous",highlight:"ressemble",product1Name:"T-shirt en Coton",product2Name:"Baskets Urbaines"},{title:"Votre Intérieur, votre",highlight:"Refuge",product1Name:"Lampe de Bureau",product2Name:"Service de Table"}].map(m=>{const N=g(m.product1Name),S=g(m.product2Name);return N&&S?{...m,product1:N,product2:S}:null}).filter(m=>m!==null);i.length>0&&c(i)}catch(p){console.error("Failed to fetch products for hero carousel:",p)}})()},[]);const n=()=>{o.current&&clearTimeout(o.current)};r.useEffect(()=>(a.length>0&&(n(),o.current=window.setTimeout(()=>s(h=>h===a.length-1?0:h+1),5e3)),()=>{n()}),[l,a.length]);const d=()=>{if(a.length===0)return;const p=l===0?a.length-1:l-1;s(p)},u=()=>{if(a.length===0)return;const p=l===a.length-1?0:l+1;s(p)},b=h=>{s(h)};if(a.length===0)return e.jsx("section",{className:"h-[50vh] w-full bg-gray-200 animate-pulse"});const v=a[l];return e.jsxs("section",{className:"h-[50vh] w-full m-auto pt-12 pb-4 px-4 relative group bg-gray-900",children:[e.jsxs("div",{className:"w-full h-full rounded-2xl bg-center bg-cover duration-500 flex items-center justify-center text-center text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full",children:e.jsx(Q,{product:v.product1,loading:"eager",className:"w-full h-full object-cover opacity-20 blur-sm scale-110"})}),e.jsxs("div",{className:"relative z-10 p-4",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-extrabold drop-shadow-lg",children:[v.title," ",e.jsx("span",{className:"text-green-400",children:v.highlight})]}),e.jsx("button",{onClick:()=>t(v.product1.id),className:"mt-6 bg-white text-gray-900 font-bold py-3 px-6 rounded-full shadow-lg hover:bg-gray-200 transition-transform transform hover:scale-105",children:"Découvrir"})]}),e.jsx("div",{className:"absolute z-20 w-28 md:w-40 h-auto -left-4 md:left-10 top-1/2 -translate-y-1/2 rotate-[-15deg] drop-shadow-2xl opacity-90 pointer-events-none",style:{filter:"drop-shadow(0 0 15px rgba(134, 239, 172, 0.4))"},children:e.jsx(Q,{product:v.product1,loading:"lazy",className:"w-full h-full object-contain rounded-lg"})}),e.jsx("div",{className:"absolute z-20 w-28 md:w-40 h-auto -right-4 md:right-10 top-1/2 -translate-y-1/2 rotate-[15deg] drop-shadow-2xl opacity-90 pointer-events-none",style:{filter:"drop-shadow(0 0 15px rgba(134, 239, 172, 0.4))"},children:e.jsx(Q,{product:v.product2,loading:"lazy",className:"w-full h-full object-contain rounded-lg"})})]}),e.jsx("div",{className:"hidden group-hover:block absolute top-1/2 -translate-y-1/2 left-5 text-2xl rounded-full p-2 bg-black/40 text-white cursor-pointer z-20",onClick:d,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"hidden group-hover:block absolute top-1/2 -translate-y-1/2 right-5 text-2xl rounded-full p-2 bg-black/40 text-white cursor-pointer z-20",onClick:u,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"flex top-4 justify-center py-2 absolute bottom-5 left-1/2 -translate-x-1/2 z-20",children:a.map((h,p)=>e.jsx("div",{onClick:()=>b(p),className:`text-2xl cursor-pointer mx-1 ${l===p?"text-white":"text-white/50"}`,children:"•"},p))})]})},$=()=>e.jsx("div",{className:"flex justify-center items-center p-4",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-teal-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),ce=({product:t,quantity:a=1,className:c=""})=>{const{addToCart:l}=Z(),[s,o]=r.useState(!1),n=()=>{s||(l(t,a),o(!0),setTimeout(()=>o(!1),2e3))};return e.jsx("button",{onClick:n,disabled:s,className:`w-full text-sm font-bold px-4 py-2 rounded-lg transition-colors duration-300 flex items-center justify-center gap-2 h-11 ${c} ${s?"bg-green-500 text-white":"bg-teal-600 text-white hover:bg-teal-700"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Ajouté !"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Ajouter"]})})},Se=({product:t,onView:a,onQuickView:c,favoriteIds:l,onToggleFavorite:s})=>{const o=t.originalPrice?Math.round((t.originalPrice-t.price)/t.originalPrice*100):0,n=l.includes(t.id);return e.jsxs("div",{className:"border border-yellow-500/30 rounded-lg overflow-hidden shadow-md hover:shadow-yellow-500/20 hover:shadow-xl transition-shadow duration-300 bg-gray-800 flex flex-col group",children:[e.jsxs("div",{className:"block overflow-hidden relative text-left",children:[e.jsx("button",{onClick:()=>a(t.id),className:"w-full",children:e.jsx(Q,{product:t,loading:"lazy",className:"w-full h-56 object-cover transition-transform duration-500 group-hover:scale-110"})}),o>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-yellow-400 text-gray-900 text-xs font-bold px-2 py-1 rounded-full z-10",children:["-",o,"%"]}),e.jsx("button",{onClick:()=>s(t.id),"aria-label":"Ajouter aux favoris",className:`absolute top-3 right-3 bg-white/80 backdrop-blur-sm rounded-full p-2 transition-all duration-300 transform hover:scale-110 group-hover:opacity-100 ${n?"text-red-500 opacity-100":"text-gray-700 hover:text-red-500 opacity-0"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${n?"text-red-500":"text-gray-700"}`,viewBox:"0 0 20 20",fill:n?"currentColor":"none",stroke:"currentColor",strokeWidth:n?0:1.5,children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("button",{onClick:()=>c(t),className:"w-full text-sm bg-white/90 text-gray-900 font-bold py-2 px-4 rounded-full backdrop-blur-sm hover:bg-white",children:"Aperçu Rapide"})})]}),e.jsxs("div",{className:"p-4 flex-grow flex flex-col text-white",children:[e.jsx("h4",{className:"font-bold text-base truncate",children:t.name}),t.reviews&&t.reviews.length>0&&e.jsxs("div",{className:"flex items-center text-xs text-gray-300 my-2 gap-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["★".repeat(Math.round(t.reviews.reduce((d,u)=>d+u.rating,0)/t.reviews.length)),"☆".repeat(5-Math.round(t.reviews.reduce((d,u)=>d+u.rating,0)/t.reviews.length))]}),e.jsxs("span",{children:[t.reviews.length," avis"]})]}),e.jsxs("div",{className:"flex items-baseline gap-2 my-1",children:[e.jsxs("p",{className:"text-yellow-400 font-bold text-xl",children:[t.price," €"]}),t.originalPrice&&e.jsxs("p",{className:"text-gray-400 line-through text-sm",children:[t.originalPrice," €"]})]}),e.jsx("div",{className:"mt-auto",children:e.jsx(ce,{product:t})})]})]})},Le=K.memo(Se),Pe=({targetDate:t})=>{const a=()=>{const o=+new Date(t)-+new Date;let n={days:0,hours:0,minutes:0,seconds:0};return o>0&&(n={days:Math.floor(o/864e5),hours:Math.floor(o/36e5%24),minutes:Math.floor(o/1e3/60%60),seconds:Math.floor(o/1e3%60)}),n},[c,l]=r.useState(a());return r.useEffect(()=>{const o=setTimeout(()=>{l(a())},1e3);return()=>clearTimeout(o)}),!c.days&&!c.hours&&!c.minutes&&!c.seconds?e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:"L'offre est terminée !"}):e.jsx("div",{className:"flex justify-center items-center gap-3",children:Object.entries(c).map(([o,n])=>e.jsxs("div",{className:"flex flex-col items-center p-3 bg-gray-800/50 border border-gray-600/50 rounded-lg w-20",children:[e.jsx("span",{className:"text-3xl font-extrabold text-yellow-300",style:{textShadow:"0 0 8px rgba(253, 224, 71, 0.5)"},children:String(n).padStart(2,"0")}),e.jsx("span",{className:"text-xs uppercase text-gray-400",children:o})]},o))})},Me=({onViewProduct:t,onQuickView:a,favoriteIds:c,onToggleFavorite:l})=>{const[s,o]=r.useState([]),[n,d]=r.useState(!0),u=new Date;return u.setDate(u.getDate()+2),r.useEffect(()=>{(async()=>{d(!0);try{const h=await(await fetch("/api/products/flash-sale")).json();o(h)}catch(v){console.error("Failed to fetch flash sale products:",v)}finally{d(!1)}})()},[]),s.length===0&&!n?null:e.jsx("section",{className:"bg-gray-900 pt-4 pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("h2",{className:"text-3xl font-extrabold text-white uppercase tracking-wider",children:[e.jsx("span",{className:"text-yellow-400",children:"⚡"})," VENTE FLASH ",e.jsx("span",{className:"text-yellow-400",children:"⚡"})]}),e.jsx("p",{className:"mt-3 text-base text-gray-300",children:"Ne manquez pas nos offres exclusives à durée limitée !"})]}),e.jsx("div",{className:"mb-10",children:e.jsx(Pe,{targetDate:u.toISOString()})}),n?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx($,{})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(b=>e.jsx(Le,{product:b,onView:t,onQuickView:a,favoriteIds:c,onToggleFavorite:l},b.id))})]})})},Ae=({product:t,onView:a,onQuickView:c,favoriteIds:l,onToggleFavorite:s})=>{const o=l.includes(t.id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 bg-white flex flex-col group",children:[e.jsxs("div",{className:"block overflow-hidden relative text-left",children:[e.jsx("button",{onClick:()=>a(t.id),className:"w-full",children:e.jsx(Q,{product:t,loading:"lazy",className:"w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"})}),t.isSecondHand&&e.jsx("span",{className:"absolute top-3 left-3 bg-orange-500 text-white text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-full z-10 shadow-md",children:"Seconde Main"}),e.jsx("button",{onClick:()=>s(t.id),"aria-label":"Ajouter aux favoris",className:`absolute top-3 right-3 bg-white/80 backdrop-blur-sm rounded-full p-2 text-gray-700 transition-all duration-300 transform hover:scale-110 group-hover:opacity-100 ${o?"text-red-500 opacity-100":"hover:text-red-500 opacity-0"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:o?"currentColor":"none",stroke:"currentColor",strokeWidth:o?0:1.5,children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("button",{onClick:()=>c(t),className:"w-full text-sm bg-white/90 text-gray-900 font-bold py-2 px-4 rounded-full backdrop-blur-sm hover:bg-white",children:"Aperçu Rapide"})})]}),e.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[e.jsx("h3",{className:"font-bold text-md text-gray-800 truncate mb-1",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.subcategory}),t.reviews&&t.reviews.length>0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2 gap-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["★".repeat(Math.round(t.reviews.reduce((n,d)=>n+d.rating,0)/t.reviews.length)),"☆".repeat(5-Math.round(t.reviews.reduce((n,d)=>n+d.rating,0)/t.reviews.length))]}),e.jsxs("span",{children:[t.reviews.length," avis"]})]}),e.jsxs("p",{className:"text-lg font-semibold text-teal-600 mb-4",children:[t.price," €"]}),e.jsx("div",{className:"mt-auto",children:e.jsx(ce,{product:t})})]})]})},X=K.memo(Ae),_e=({selectedCategory:t,selectedSubcategory:a,onViewProduct:c,onQuickView:l,favoriteIds:s,onToggleFavorite:o})=>{const[n,d]=r.useState([]),[u,b]=r.useState(1),[v,h]=r.useState(!0),[p,x]=r.useState(!0),[g,w]=r.useState(!1),[i,m]=r.useState(null),N=()=>t?`Nos produits : ${t}`:a?`Nos produits : ${a}`:"Tous nos produits",S=r.useCallback(async E=>{E===1?x(!0):w(!0),m(null);let P="/api/products/main";const A=new URLSearchParams;A.append("page",String(E)),A.append("limit","10"),t?(P="/api/products",A.append("category",t)):a&&(P="/api/products",A.append("subcategory",a)),P+=`?${A.toString()}`;try{const O=await fetch(P);if(!O.ok)throw new Error("Impossible de charger les produits");const k=await O.json();d(_=>E===1?k.products:[..._,...k.products]),h(k.hasMore)}catch(O){m(O.message)}finally{x(!1),w(!1)}},[t,a]);r.useEffect(()=>{d([]),b(1),h(!0),S(1)},[t,a]);const L=()=>{const E=u+1;b(E),S(E)};return e.jsxs("section",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:N()}),e.jsx("p",{className:"text-gray-500 mb-12",children:"Découvrez notre sélection organisée pour vous."}),p?e.jsx("div",{className:"col-span-full flex justify-center py-10",children:e.jsx($,{})}):i?e.jsx("p",{className:"col-span-full text-red-500 text-center py-10",children:i}):n.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8",children:n.map(E=>e.jsx("div",{children:e.jsx(X,{product:E,onView:c,onQuickView:l,favoriteIds:s,onToggleFavorite:o})},E.id))}),e.jsx("div",{className:"text-center mt-12",children:g?e.jsx($,{}):v?e.jsx("button",{onClick:L,className:"bg-teal-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-teal-700 transition-colors",children:"Charger plus"}):e.jsx("p",{className:"text-gray-500",children:"🎉 Vous avez vu tous les produits !"})})]}):e.jsx("div",{className:"text-center col-span-full my-12 text-gray-500 py-10",children:e.jsx("p",{children:"Aucun produit ne correspond à cette sélection pour le moment."})})]})},Te=({onShowTerms:t,onShowPrivacy:a,onShowReturns:c})=>e.jsx("footer",{className:"bg-gray-800 text-gray-300 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center space-y-3",children:[e.jsx("p",{className:"font-bold text-xl mb-2",children:"CADORAMA"}),e.jsx("p",{className:"text-sm",children:"119 Rue d'Isle, 02100 Saint-Quentin, France"}),e.jsx("p",{className:"text-sm",children:e.jsx("a",{href:"tel:+33323078725",className:"text-gray-300 hover:text-white hover:underline",children:"03 23 07 87 25"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"SIRET: 423 195 395 00011"}),e.jsx("div",{className:"flex justify-center my-3",children:e.jsx("a",{href:"https://www.facebook.com/home.php",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white","aria-label":"Page Facebook de Cadorama",children:e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})})}),e.jsxs("nav",{className:"text-sm text-gray-400 flex justify-center gap-x-4 gap-y-2 flex-wrap pt-4 border-t border-gray-700",children:[e.jsx("a",{href:"#",onClick:l=>{l.preventDefault(),t()},className:"hover:text-white hover:underline",children:"Conditions Générales de Vente"}),e.jsx("span",{className:"text-gray-600 hidden md:inline",children:"·"}),e.jsx("a",{href:"#",onClick:l=>{l.preventDefault(),a()},className:"hover:text-white hover:underline",children:"Politique de Confidentialité"}),e.jsx("span",{className:"text-gray-600 hidden md:inline",children:"·"}),e.jsx("a",{href:"#",onClick:l=>{l.preventDefault(),c()},className:"hover:text-white hover:underline",children:"Politique de Retours"}),e.jsx("span",{className:"text-gray-600 hidden md:inline",children:"·"}),e.jsx("a",{href:"/.well-known/agent-shopping.json",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white hover:underline",children:"API pour Agents"})]}),e.jsxs("p",{className:"text-xs text-gray-500 pt-4",children:["© ",new Date().getFullYear()," CADORAMA. Tous droits réservés."]})]})}),Ee=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 flex justify-center items-center",onClick:t,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"À propos de CADORAMA"}),e.jsx("button",{onClick:t,"aria-label":"Fermer",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"text-gray-600 space-y-4",children:[e.jsx("p",{children:"Depuis des années, CADORAMA est une institution à Saint-Quentin, fièrement installée au 119 Rue d'Isle. Née de la passion pour le commerce de proximité, notre boutique a toujours eu pour mission de proposer une sélection éclectique et surprenante d'articles pour tous les goûts et tous les besoins."}),e.jsx("p",{children:"Aujourd'hui, nous sommes ravis de transposer cette expérience unique en ligne. CADORAMA.fr, c'est l'âme de notre grand bazar physique, accessible du bout des doigts. Vous y retrouverez la même diversité : de la dernière tendance mode aux gadgets high-tech, en passant par la décoration qui transformera votre intérieur, les jouets qui émerveilleront les plus jeunes, et même une sélection gourmande de produits d'alimentation asiatique."}),e.jsx("p",{children:"Notre engagement reste le même : dénicher pour vous des produits de qualité à des prix justes, avec le service et le conseil qui ont fait notre réputation. Merci de votre confiance et bonne découverte !"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Nos Horaires"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex justify-between items-start gap-4",children:[e.jsx("span",{children:"Lundi"}),e.jsx("span",{className:"font-semibold text-right",children:"14:00 – 19:00"})]}),e.jsxs("li",{className:"flex justify-between items-start gap-4",children:[e.jsx("span",{children:"Mardi - Samedi"}),e.jsxs("span",{className:"font-semibold text-right",children:["09:30 – 12:00",e.jsx("br",{}),"14:00 – 19:00"]})]}),e.jsxs("li",{className:"flex justify-between items-start gap-4",children:[e.jsx("span",{children:"Dimanche"}),e.jsx("span",{className:"font-semibold text-right",children:"14:00 – 19:00"})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Contact & Adresse"}),e.jsx("p",{className:"text-gray-600",children:"119 Rue d'Isle, 02100 Saint-Quentin"}),e.jsx("p",{className:"text-gray-600",children:e.jsx("a",{href:"tel:+33323078725",className:"text-teal-600 hover:underline",children:"03 23 07 87 25"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Nous Trouver"}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-300",children:e.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2593.778835338104!2d3.284795876882234!3d49.84370133001859!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e811dde239a583%3A0x6b3b57e7506e78ba!2s119%20Rue%20d'Isle%2C%2002100%20Saint-Quentin!5e0!3m2!1sen!2sfr",width:"100%",height:"250",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Emplacement de CADORAMA sur Google Maps"})})]})]})]})}),Ie=({onGoToCheckout:t,onGoToLogin:a})=>{const{isCartOpen:c,toggleCart:l,cartItems:s,removeFromCart:o,updateQuantity:n,totalPrice:d}=Z(),{currentUser:u}=G(),[b,v]=r.useState(!1),h=()=>{v(!0),setTimeout(()=>{l(),t()},150)},p=()=>{l(),a()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-60 z-40 transition-opacity duration-300 ${c?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:l}),e.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-md bg-white shadow-xl z-50 transform transition-transform duration-300 flex flex-col ${c?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Votre Panier"}),e.jsx("button",{onClick:l,"aria-label":"Fermer le panier",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.length===0?e.jsxs("div",{className:"flex-grow flex flex-col justify-center items-center text-gray-500",children:[e.jsx("svg",{className:"w-24 h-24 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{children:"Votre panier est vide."})]}):e.jsx("div",{className:"flex-grow overflow-y-auto p-5 space-y-4",children:s.map(x=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Q,{product:x,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-sm",children:x.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.price," €"]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("button",{onClick:()=>n(x.id,x.quantity-1),className:"w-6 h-6 border rounded-l",children:"-"}),e.jsx("span",{className:"w-8 h-6 text-center border-t border-b",children:x.quantity}),e.jsx("button",{onClick:()=>n(x.id,x.quantity+1),className:"w-6 h-6 border rounded-r",children:"+"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold",children:[(x.price*x.quantity).toFixed(2)," €"]}),e.jsx("button",{onClick:()=>o(x.id),className:"text-xs text-red-500 hover:underline mt-1",children:"Retirer"})]})]},x.id))}),s.length>0&&e.jsxs("div",{className:"p-5 border-t",children:[e.jsxs("div",{className:"flex justify-between items-center font-bold text-lg mb-4",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[d.toFixed(2)," €"]})]}),u?e.jsx("button",{className:"w-full bg-teal-600 text-white py-3 rounded-lg font-semibold hover:bg-teal-700 transition-colors flex justify-center items-center h-12 disabled:bg-gray-400",onClick:h,disabled:b,children:b?e.jsx($,{}):"Passer la commande"}):e.jsx("button",{onClick:p,className:"w-full bg-teal-600 text-white py-3 rounded-lg font-semibold hover:bg-teal-700 transition-colors h-12",children:"Identifiez-vous pour commander"})]})]})]})},ze=({message:t})=>e.jsx("div",{className:"fixed bottom-5 right-5 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in-out z-50",children:t}),Oe=()=>{const{toastMessage:t}=Z();return t?e.jsx(ze,{message:t}):null},Fe=()=>{const[t,a]=r.useState(!1),[c,l]=r.useState([{sender:"ai",text:"Bonjour ! Je suis Cado, votre assistant shopping. Comment puis-je vous aider aujourd'hui ? 🛍️"}]),[s,o]=r.useState(!1),[n,d]=r.useState(""),u=r.useRef(null),b=()=>{var h;(h=u.current)==null||h.scrollIntoView({behavior:"smooth"})};r.useEffect(b,[c]);const v=async h=>{if(h.preventDefault(),!n.trim()||s)return;const p={sender:"user",text:n},x=[...c,p];l(x),d(""),o(!0);try{const g=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:x})});if(!g.ok){const m=await g.json();throw new Error(m.message||"La réponse de l'IA a échoué.")}const{text:w}=await g.json(),i={sender:"ai",text:w};l(m=>[...m,i])}catch(g){console.error("Error sending message to AI:",g);const w={sender:"ai",text:"Oups, quelque chose s'est mal passé. Pourriez-vous reformuler votre question ?"};l(i=>[...i,w])}finally{o(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`fixed bottom-24 right-6 w-80 sm:w-96 bg-white rounded-xl shadow-2xl transition-all duration-300 ease-in-out z-50 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:[e.jsxs("div",{className:"bg-teal-600 text-white p-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Cado - Assistant Shopping"}),e.jsx("button",{onClick:()=>a(!1),"aria-label":"Fermer le chat",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})})]}),e.jsxs("div",{className:"h-96 overflow-y-auto p-4 space-y-4",children:[c.map((h,p)=>e.jsx("div",{className:`flex ${h.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl ${h.sender==="user"?"bg-teal-100 text-gray-800 rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:e.jsx("p",{className:"text-sm",style:{whiteSpace:"pre-wrap"},children:h.text})})},p)),s&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-[80%] p-3 rounded-2xl bg-gray-200 rounded-bl-none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("span",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("span",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"})]})})}),e.jsx("div",{ref:u})]}),e.jsxs("form",{onSubmit:v,className:"p-4 border-t flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:h=>d(h.target.value),placeholder:"Posez votre question...",className:"flex-grow w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500","aria-label":"Champ de message",disabled:s}),e.jsx("button",{type:"submit",disabled:!n.trim()||s,className:"bg-teal-600 text-white rounded-full p-3 hover:bg-teal-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.925A1.5 1.5 0 005.135 9.25h6.115a.75.75 0 010 1.5H5.135a1.5 1.5 0 00-1.442 1.086L1.97 16.761a.75.75 0 00.95.826l16-5.333a.75.75 0 000-1.418l-16-5.333z"})})})]})]}),e.jsxs("button",{onClick:()=>a(!t),className:"fixed bottom-6 right-6 bg-teal-600 text-white w-16 h-16 rounded-full shadow-xl hover:bg-teal-700 active:scale-95 transition-all duration-300 z-50 flex items-center justify-center","aria-label":"Ouvrir l'assistant shopping",children:[e.jsx("svg",{className:`w-8 h-8 transition-transform duration-300 absolute ${t?"rotate-45 opacity-0":"rotate-0 opacity-100"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("svg",{className:`w-8 h-8 transition-transform duration-300 absolute ${t?"rotate-0 opacity-100":"-rotate-45 opacity-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]})},re=({viewedProductIds:t,currentProductId:a,onViewProduct:c,onQuickView:l,favoriteIds:s,onToggleFavorite:o})=>{const[n,d]=r.useState([]),[u,b]=r.useState(!1);return r.useEffect(()=>{(async()=>{const h=t.filter(p=>p!==a).slice(0,5);if(h.length===0){d([]);return}b(!0);try{const p=await fetch(`/api/products?ids=${h.join(",")}`);if(!p.ok)throw new Error("Failed to fetch recently viewed products");const x=await p.json(),g=new Map(x.map(i=>[i.id,i])),w=h.map(i=>g.get(i)).filter(i=>i!==void 0);d(w)}catch(p){console.error("Failed to fetch recently viewed products",p),d([])}finally{b(!1)}})()},[t,a]),n.length===0&&!u?null:e.jsx("div",{className:"bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 mb-8 text-center md:text-left",children:"Consultés récemment"}),u?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx($,{})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8",children:n.map(v=>e.jsx(X,{product:v,onView:c,onQuickView:l,favoriteIds:s,onToggleFavorite:o},v.id))})]})})},Re=({onClose:t,onViewProduct:a,onQuickView:c,favoriteIds:l,onToggleFavorite:s})=>{const[o,n]=r.useState("idle"),[d,u]=r.useState([]),[b,v]=r.useState(null),{currentUser:h}=G(),[p,x]=r.useState(""),[g,w]=r.useState(""),[i,m]=r.useState(""),[N,S]=r.useState(""),[L,E]=r.useState(""),[P,A]=r.useState(!1),[O,k]=r.useState(""),_=async(y,R)=>{if(!R.trim()||R==="Find a gift. Occasion: . For: . Age: . Budget: . Interests: "){v("Veuillez remplir au moins un champ pour lancer une recherche."),n("error");return}n("loading"),v(null),u([]);try{const T=await fetch("/api/ai/product-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:y,prompt:R,preferSecondHand:P})});if(!T.ok){const F=await T.json();throw new Error(F.message||"La recherche par IA a échoué.")}const H=await T.json();u(H),n("results")}catch(T){console.error("AI search failed:",T),v("Désolé, la recherche a échoué. Veuillez réessayer."),n("error")}},W=y=>{y.preventDefault();const R=`Find a gift. Occasion: ${p}. For: ${g}. Age: ${i}. Budget: ${N}. Interests: ${L}`;_("gift",R)},D=y=>{y.preventDefault(),_("descriptive",O)},z=()=>{u([]),v(null),x(""),w(""),m(""),S(""),E(""),k(""),A(!1),n("idle")},C=()=>o==="loading"?e.jsxs("div",{className:"text-center py-16",children:[e.jsx($,{}),e.jsx("p",{className:"mt-4 text-gray-600 font-semibold",children:"Notre IA cherche le produit parfait..."})]}):o==="error"||o==="results"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:o==="results"?d.length>0?`Nous avons trouvé ${d.length} suggestion(s)`:"Aucune suggestion trouvée":"Une erreur est survenue"}),e.jsx("button",{onClick:z,className:"px-4 py-2 bg-gray-200 text-gray-800 font-bold rounded-lg hover:bg-gray-300 text-sm",children:"Nouvelle recherche"})]}),o==="error"&&e.jsx("p",{className:"text-red-600 text-center py-8",children:b}),o==="results"&&(d.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:d.map(y=>e.jsx(X,{product:y,onView:a,onQuickView:c,favoriteIds:l,onToggleFavorite:s},y.id))}):e.jsx("p",{className:"text-gray-600 text-center py-8",children:"Veuillez essayer avec d'autres mots-clés pour de meilleurs résultats."}))]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Remplissez ce formulaire et laissez la magie opérer !"}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-gray-700",children:"Occasion"}),e.jsx("input",{type:"text",id:"occasion",value:p,onChange:y=>x(y.target.value),placeholder:"un anniversaire",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pourQui",className:"block text-sm font-medium text-gray-700",children:"Pour qui ?"}),e.jsx("input",{type:"text",id:"pourQui",value:g,onChange:y=>w(y.target.value),placeholder:"ma meilleure amie",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700",children:"Âge"}),e.jsx("input",{type:"text",id:"age",value:i,onChange:y=>m(y.target.value),placeholder:"30",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-gray-700",children:"Budget"}),e.jsx("input",{type:"text",id:"budget",value:N,onChange:y=>S(y.target.value),placeholder:"50-100€",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"interests",className:"block text-sm font-medium text-gray-700",children:"Centres d'intérêt (séparés par des virgules)"}),e.jsx("input",{type:"text",id:"interests",value:L,onChange:y=>E(y.target.value),placeholder:"la lecture, les voyages et le yoga",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-center pt-2",children:[e.jsx("input",{type:"checkbox",id:"preferSecondHand-gift",name:"preferSecondHand",checked:P,onChange:y=>A(y.target.checked),className:"h-4 w-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500"}),e.jsx("label",{htmlFor:"preferSecondHand-gift",className:"ml-2 block text-sm text-gray-700",children:"Prioriser les articles de seconde main"})]}),e.jsx("button",{type:"submit",className:"w-full mt-2 px-6 py-3 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 transition-all flex items-center justify-center gap-2",children:"Trouver des Idées"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-white px-2 text-sm text-gray-500 uppercase",children:"Ou"})})]}),e.jsxs("form",{onSubmit:D,children:[e.jsx("label",{htmlFor:"searchText",className:"block text-sm font-medium text-gray-700 mb-2",children:"Décrivez simplement ce que vous cherchez"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"searchText",value:O,onChange:y=>k(y.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500",placeholder:"Ex: des chaussures pour courir en ville"}),e.jsx("button",{type:"submit","aria-label":"Lancer la recherche descriptive",className:"p-3 bg-gray-200 hover:bg-gray-300 rounded-md transition-colors flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]})]});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 flex justify-center items-center p-4",onClick:t,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-2xl w-full max-h-[90vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-7 h-7 text-teal-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Assistant IA"})]}),e.jsx("button",{onClick:t,"aria-label":"Fermer",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 hover:text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto flex-grow -mx-6 sm:-mx-8 px-6 sm:px-8 pt-2",children:C()})]})})},Ve=({onFindGift:t})=>e.jsx("section",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 py-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"inline-block bg-teal-200 text-teal-800 text-xs font-semibold px-3 py-1 rounded-full uppercase",children:"Nouveau"})}),e.jsxs("h2",{className:"text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl",children:["Le cadeau parfait, ",e.jsx("span",{className:"text-teal-600",children:"sans effort"}),"."]}),e.jsx("p",{className:"mt-4 max-w-xl mx-auto text-lg text-gray-600",children:"Plus d'inspiration ? Décrivez la personne à qui vous voulez faire plaisir et notre assistant IA vous proposera les meilleures idées."}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-full text-white bg-teal-600 hover:bg-teal-700 transform hover:scale-105 transition-all duration-300 shadow-lg",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Lancer l'assistant cadeaux"]})})]})}),De=r.lazy(()=>I(()=>import("./ProductPage-C2YdeEJt.js"),__vite__mapDeps([0,1]))),Be=r.lazy(()=>I(()=>import("./FavoritesPage-KlJuarFj.js"),__vite__mapDeps([2,1]))),$e=r.lazy(()=>I(()=>import("./OrderHistoryPage-Ah_sV46h.js"),__vite__mapDeps([3,1]))),He=r.lazy(()=>I(()=>import("./LoginPage-D6JbmY5c.js"),__vite__mapDeps([4,1]))),qe=r.lazy(()=>I(()=>import("./RegisterPage-Dgz2aG0o.js"),__vite__mapDeps([5,1]))),We=r.lazy(()=>I(()=>import("./CheckoutPage-D-HcY_v2.js"),__vite__mapDeps([6,1,7]))),Ue=r.lazy(()=>I(()=>import("./OrderConfirmationPage-CbWsCHva.js"),__vite__mapDeps([8,1]))),Qe=r.lazy(()=>I(()=>import("./ForgotPasswordPage-D1YpRlSw.js"),__vite__mapDeps([9,1]))),Ge=r.lazy(()=>I(()=>import("./ResetPasswordPage-BRaUf2Zi.js"),__vite__mapDeps([10,1]))),Je=r.lazy(()=>I(()=>import("./SearchPage-BCJ_nfGF.js"),__vite__mapDeps([11,1]))),Ze=r.lazy(()=>I(()=>import("./AccountPage-BYFJl8Jn.js"),__vite__mapDeps([12,1]))),Ye=r.lazy(()=>I(()=>import("./TermsOfServicePage-CwX7TPw3.js"),__vite__mapDeps([13,1]))),Ke=r.lazy(()=>I(()=>import("./PrivacyPolicyPage-BUjf_oKo.js"),__vite__mapDeps([14,1]))),Xe=r.lazy(()=>I(()=>import("./ReturnsPolicyPage-D9JpFan_.js"),__vite__mapDeps([15,1]))),et=r.lazy(()=>I(()=>import("./ProductQuickViewModal-CSmJnGEs.js"),__vite__mapDeps([16,1]))),tt=()=>{const{currentUser:t,token:a,isLoading:c}=G(),[l,s]=r.useState("store"),[o,n]=r.useState(null),[d,u]=r.useState(null),[b,v]=r.useState(null),[h,p]=r.useState(null),[x,g]=r.useState(null),[w,i]=r.useState(""),[m,N]=r.useState(null),[S,L]=r.useState(!1),[E,P]=r.useState(!1),[A,O]=r.useState([]),[k,_]=r.useState([]),W=!!(t!=null&&t.isAdmin),D=r.useCallback(async()=>{if(t&&a)try{const j=await fetch("/api/favorites",{headers:{Authorization:`Bearer ${a}`}});if(j.ok){const V=await j.json();_(V)}}catch(j){console.error("Failed to fetch favorites:",j)}else _([])},[t,a]);r.useEffect(()=>{if(D(),t)try{const j=localStorage.getItem(`viewed_products_${t.email}`);j&&O(JSON.parse(j))}catch(j){console.error("Failed to load viewed products from localStorage",j)}else O([])},[D,t]),r.useEffect(()=>{if(t)try{localStorage.setItem(`viewed_products_${t.email}`,JSON.stringify(A))}catch(j){console.error("Failed to save viewed products to localStorage",j)}},[A,t]);const z=j=>{O(V=>[j,...V.filter(B=>B!==j)].slice(0,10)),n(j),s("product"),window.scrollTo(0,0)},C=()=>{s("store"),n(null),v(null),p(null),i("")},y=j=>{C(),v(j)},R=j=>{C(),p(j)},T=async j=>{if(!t||!a){s("login");return}const V=[...k],ee=V.includes(j);_(ee?V.filter(B=>B!==j):[j,...V]);try{const B=await fetch("/api/favorites/toggle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({productId:j})});if(!B.ok)_(V);else{const ue=await B.json();_(ue)}}catch(B){console.error("Failed to toggle favorite",B),_(V)}},H=()=>{s(t?"favorites":"login")},F=()=>{s(t?"orders":"login")},U=()=>{s(t?"account":"login")},f=()=>{s("checkout")},M=j=>{g(j),s("orderConfirmation")},q=j=>{C(),i(j),s("search")};if(c)return e.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:e.jsx($,{})});const de=()=>{switch(l){case"login":return e.jsx(He,{onLoginSuccess:C,onShowRegister:()=>s("register"),onShowForgotPassword:()=>s("forgotPassword")});case"register":return e.jsx(qe,{onRegisterSuccess:C,onShowLogin:()=>s("login")});case"forgotPassword":return e.jsx(Qe,{onShowLogin:()=>s("login"),onLinkSent:j=>{N(j),s("resetPassword")}});case"resetPassword":{const j=m?`reset-token-for-${m}`:"";return e.jsx(Ge,{onShowLogin:()=>s("login"),token:j})}case"search":return e.jsx(Je,{query:w,onViewProduct:z,onQuickView:u,favoriteIds:k,onToggleFavorite:T});case"account":return e.jsx(Ze,{onBack:C});case"orders":return e.jsx($e,{onBack:C});case"favorites":return e.jsx(Be,{favoriteIds:k,onViewProduct:z,onQuickView:u,onBack:C,onToggleFavorite:T});case"checkout":return e.jsx(We,{onOrderPlaced:M,onBack:C});case"orderConfirmation":return e.jsx(Ue,{order:x,onGoHome:C});case"terms":return e.jsx(Ye,{onBack:C});case"privacy":return e.jsx(Ke,{onBack:C});case"returns":return e.jsx(Xe,{onBack:C});case"product":return o?e.jsxs(e.Fragment,{children:[e.jsx(De,{productId:o,onBack:C,onSelectSubcategory:R,onViewProduct:z,onQuickView:u,favoriteIds:k,onToggleFavorite:T}),t&&e.jsx(re,{viewedProductIds:A,currentProductId:o,onViewProduct:z,onQuickView:u,favoriteIds:k,onToggleFavorite:T})]}):null;case"store":default:return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{onViewProduct:z}),e.jsx(Me,{onViewProduct:z,onQuickView:u,favoriteIds:k,onToggleFavorite:T}),e.jsx(Ve,{onFindGift:()=>P(!0)}),e.jsx(_e,{selectedCategory:b,selectedSubcategory:h,onViewProduct:z,onQuickView:u,favoriteIds:k,onToggleFavorite:T}),t&&e.jsx(re,{viewedProductIds:A,currentProductId:null,onViewProduct:z,onQuickView:u,favoriteIds:k,onToggleFavorite:T})]})}};return e.jsxs("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[e.jsx(Ne,{onShowAbout:()=>L(!0),onShowAiHelper:()=>P(!0),onSelectCategory:y,onSelectSubcategory:R,onShowFavorites:H,onShowOrderHistory:F,onShowAccount:U,favoriteCount:k.length,onShowLogin:()=>s("login"),isAdmin:W,onShowAdmin:()=>window.open("","_blank"),onGoHome:C,onSearch:q}),e.jsx("main",{className:"flex-grow",children:e.jsxs(r.Suspense,{fallback:e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsx($,{})}),children:[de(),d&&e.jsx(et,{product:d,onClose:()=>u(null)})]})}),e.jsx(Te,{onShowTerms:()=>s("terms"),onShowPrivacy:()=>s("privacy"),onShowReturns:()=>s("returns")}),S&&e.jsx(Ee,{onClose:()=>L(!1)}),E&&e.jsx(Re,{onClose:()=>P(!1),onViewProduct:j=>{P(!1),z(j)},onQuickView:j=>{P(!1),u(j)},favoriteIds:k,onToggleFavorite:T}),e.jsx(Ie,{onGoToCheckout:f,onGoToLogin:()=>s("login")}),e.jsx(Oe,{}),e.jsx(Fe,{})]})},oe=document.getElementById("root");oe&&Y.createRoot(oe).render(e.jsx(K.StrictMode,{children:e.jsx(be,{children:e.jsx(ye,{children:e.jsx(tt,{})})})}));export{Q as A,$ as L,X as P,ce as a,Z as b,e as j,G as u};
