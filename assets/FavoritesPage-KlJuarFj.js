import{j as e,L as v,P as p}from"./index-ByxEemcU.js";import{r as l}from"./vendor-CIP6LD3P.js";const L=({favoriteIds:s,onViewProduct:n,onQuickView:d,onBack:x,onToggleFavorite:m})=>{const[u,c]=l.useState([]),[h,g]=l.useState([]),[f,a]=l.useState(!0);return l.useEffect(()=>{const r=async()=>{if(s.length!==0){a(!0);try{const t=await fetch(`/api/products?ids=${s.join(",")}`);if(!t.ok)throw new Error("Failed to fetch favorite products");const i=await t.json(),w=new Map(i.map(o=>[o.id,o])),b=s.map(o=>w.get(o)).filter(o=>!!o);c(b)}catch(t){console.error("Failed to fetch favorite products",t),c([])}finally{a(!1)}}},j=async()=>{try{const t=await fetch("/api/products/flash-sale");if(!t.ok)return;const i=await t.json();g(i)}catch(t){console.error("Failed to fetch recommendations",t)}};s.length===0?(a(!0),c([]),j().finally(()=>a(!1))):r()},[s]),e.jsx("div",{className:"bg-white min-h-screen animate-fade-in",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-8 pb-4 border-b",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-extrabold text-gray-900 flex items-center gap-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Mes Favoris"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Vos articles préférés, tous au même endroit."})]}),e.jsx("button",{onClick:x,className:"mt-4 sm:mt-0 text-sm bg-gray-100 text-gray-700 font-semibold py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors self-start sm:self-center",children:"← Retour à la boutique"})]}),f?e.jsx("div",{className:"text-center py-20",children:e.jsx(v,{})}):u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8",children:u.map(r=>e.jsx(p,{product:r,onView:n,onQuickView:d,favoriteIds:s,onToggleFavorite:m},r.id))}):e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-20",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-20 w-20 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"Votre liste de favoris est vide"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Parcourez nos produits et cliquez sur le cœur pour en ajouter."}),e.jsx("button",{onClick:x,className:"mt-6 px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors font-semibold",children:"Explorer les produits"})]}),h.length>0&&e.jsxs("div",{className:"mt-16 border-t pt-12",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-8 text-center",children:"Vous aimerez peut-être"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 max-w-5xl mx-auto",children:h.map(r=>e.jsx(p,{product:r,onView:n,onQuickView:d,favoriteIds:s,onToggleFavorite:m},r.id))})]})]})]})})};export{L as default};
