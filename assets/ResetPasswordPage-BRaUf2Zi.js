import{j as e,L as b}from"./index-ByxEemcU.js";import{r as t}from"./vendor-CIP6LD3P.js";const y=({onShowLogin:i,token:a})=>{const[o,u]=t.useState(""),[d,h]=t.useState(""),[l,c]=t.useState(!1),[m,r]=t.useState(null),[x,p]=t.useState(!1);t.useEffect(()=>{a||r("Le lien de réinitialisation est invalide ou a expiré.")},[a]);const f=async s=>{if(s.preventDefault(),r(null),o.length<6){r("Le mot de passe doit contenir au moins 6 caractères.");return}if(o!==d){r("Les mots de passe ne correspondent pas.");return}c(!0);try{const n=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,password:o})}),j=await n.json();if(!n.ok)throw new Error(j.message||"La réinitialisation a échoué.");p(!0)}catch(n){r(n.message)}finally{c(!1)}};return x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center px-4",children:e.jsx("div",{className:"w-full max-w-md text-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Mot de passe réinitialisé !"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Votre mot de passe a été mis à jour avec succès. Vous pouvez maintenant vous connecter."}),e.jsx("button",{onClick:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-bold text-white bg-teal-600 hover:bg-teal-700",children:"Retour à la connexion"})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),i()},className:"inline-block","aria-label":"CADORAMA Homepage",children:e.jsx("svg",{width:"190",height:"40",viewBox:"0 0 190 40",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs("g",{children:[e.jsxs("g",{transform:"translate(0, 4)",children:[e.jsx("rect",{width:"32",height:"32",rx:"8",fill:"#0d9488"}),e.jsx("path",{d:"M26 12V21H6V12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 8H4V12H28V8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 21V8",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 8H11.5C10.837 8 10.2011 7.73661 9.73223 7.26777C9.26339 6.79893 9 6.16304 9 5.5C9 4.83696 9.26339 4.20107 9.73223 3.73223C10.2011 3.26339 10.837 3 11.5 3C13.5 3 16 8 16 8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 8H20.5C21.163 8 21.7989 7.73661 22.2678 7.26777C22.7366 6.79893 23 6.16304 23 5.5C23 4.83696 22.7366 4.20107 22.2678 3.73223C21.7989 3.26339 21.163 3 20.5 3C18.5 3 16 8 16 8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("text",{x:"45",y:"28",fontFamily:"Poppins, sans-serif",fontSize:"24",fontWeight:"bold",fill:"#111827",children:"CADORAMA"})]})})})}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Réinitialiser le mot de passe"}),m&&e.jsx("p",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm",children:m}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),e.jsx("input",{id:"password",type:"password",required:!0,value:o,onChange:s=>u(s.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),e.jsx("input",{id:"confirmPassword",type:"password",required:!0,value:d,onChange:s=>h(s.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l||!a,className:"w-full h-11 flex justify-center items-center py-3 px-4 border border-transparent rounded-full shadow-sm text-sm font-bold text-white bg-teal-600 hover:bg-teal-700 disabled:bg-gray-400",children:l?e.jsx(b,{}):"Mettre à jour"})})]})]})]})})};export{y as default};
