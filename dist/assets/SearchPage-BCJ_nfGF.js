import{j as e,L as m,P as E}from"./index-ByxEemcU.js";import{r as t}from"./vendor-CIP6LD3P.js";const k=({query:r,onViewProduct:j,onQuickView:f,favoriteIds:v,onToggleFavorite:y})=>{const[a,l]=t.useState([]),[S,i]=t.useState(1),[w,d]=t.useState(!0),[x,u]=t.useState(!0),[L,h]=t.useState(!1),[p,g]=t.useState(null),c=t.useCallback(async(s,b)=>{s===1?u(!0):h(!0),g(null);const P=new URLSearchParams({q:b,page:String(s),limit:"10"});try{const o=await fetch(`/api/products/search?${P.toString()}`);if(!o.ok)throw new Error("La recherche de produits a Ã©chouÃ©.");const n=await o.json();l(M=>s===1?n.products:[...M,...n.products]),d(n.hasMore)}catch(o){g(o.message)}finally{u(!1),h(!1)}},[]);t.useEffect(()=>{l([]),i(1),d(!0),c(1,r)},[r,c]);const N=()=>{const s=S+1;i(s),c(s,r)};return e.jsxs("section",{className:"flex-grow max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fade-in w-full",children:[e.jsxs("h1",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:["RÃ©sultats pour : ",e.jsx("span",{className:"text-teal-600",children:r})]}),e.jsx("p",{className:"text-gray-500 mb-12",children:x?"Recherche en cours...":a.length>0?`${a.length} produit(s) trouvÃ©(s).`:"Aucun produit trouvÃ©."}),x?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(m,{})}):p?e.jsx("p",{className:"text-red-500 text-center py-10",children:p}):a.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8",children:a.map(s=>e.jsx("div",{children:e.jsx(E,{product:s,onView:j,onQuickView:f,favoriteIds:v,onToggleFavorite:y})},s.id))}),e.jsx("div",{className:"text-center mt-12",children:L?e.jsx(m,{}):w?e.jsx("button",{onClick:N,className:"bg-teal-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-teal-700 transition-colors",children:"Charger plus"}):e.jsx("p",{className:"text-gray-500",children:"ðŸŽ‰ Vous avez vu tous les produits !"})})]}):e.jsx("div",{className:"text-center my-12 text-gray-500 py-10",children:e.jsx("p",{children:"Aucun produit ne correspond Ã  votre recherche."})})]})};export{k as default};
